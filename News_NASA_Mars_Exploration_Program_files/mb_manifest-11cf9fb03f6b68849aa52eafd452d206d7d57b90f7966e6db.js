function pad2(e){return e<10?"0"+e:e}function cos(e){return Math.cos(e*Math.PI/180)}function sin(e){return Math.sin(e*Math.PI/180)}function daysSinceJ200Epoch(e){return jdttToJ2000((2440587.5+e.getTime()/864e5+(TAI_UTC+32.184)/86400).toFixed(5))}function getMarsParamsOfDate(e){var t=(19.3871+.52402073*e)%360,n=(270.3871+.524038496*e)%360,i=.0071*cos(.985626*e/2.2353+49.409)+.0057*cos(.985626*e/2.7543+168.173)+.0039*cos(.985626*e/1.1177+191.837)+.0037*cos(.985626*e/15.7866+21.736)+.0021*cos(.985626*e/2.1354+15.704)+.002*cos(.985626*e/2.4694+95.528)+.0018*cos(.985626*e/32.8493+49.095),a=(10.691+3e-7*e)*sin(t)+.623*sin(2*t)+.05*sin(3*t)+.005*sin(4*t)+5e-4*sin(5*t)+i,o=(n+a)%360,s=2.861*sin(2*o)-.071*sin(4*o)+.002*sin(6*o)-a,r=24*s/360;return[t,n,i,a,s.toFixed(5),r]}function getMissionTime(e,t,n){return resetTo24Range(24*j2000toMsd(t).toFixed(5)%24-24*(360-n)/360)}function j2000toMsd(e){return(e-4.5)/1.0274912517+44796-9626e-7}function utcToMsd(e){return j2000toMsd(daysSinceJ200Epoch(e))}function msdToJ2000(e){return 1.0274912517*(e-44796+9626e-7)+4.5}function msdToUtc(e){var t=864e5*(j2000toJdtt(msdToJ2000(e))-(TAI_UTC+32.184)/86400-2440587.5),n=new Date(0);return n.setUTCMilliseconds(t),n}function jdttToJ2000(e){return e-2451545}function j2000toJdtt(e){return e+2451545}function hToHMS(e){var t=3600*e,n=Math.floor(t/3600);n<10&&(n="0"+n);var i=t%3600,a=Math.floor(i/60);a<10&&(a="0"+a);var o=Math.round(i%60);return o<10&&(o="0"+o),[n,a,o]}function resetTo24Range(e){return e<0?e+=24:24<=e&&(e-=24),e}function testDate(e,t,n){var i=utcToMsd(e).toFixed(5);console.log("msd",i);var a=daysSinceJ200Epoch(e).toFixed(5);console.log("j2000",a);var o=Math.floor(i-(360-t)/360-parseInt(n)),s=getMarsParamsOfDate(a);console.log("[mars_mean_anomaly, alpha_fms, perturbers, equation_of_center, equation_of_time.toFixed(5), equation_of_time_in_hours]",s);var r=getMissionTime(s[4],a,parseFloat(t));console.log("lmst",r);var l=hToHMS(r);console.log("sol: hms ",o,l[0],l[1],l[2])}(function(){null==window.JST&&(window.JST={}),window.JST.events=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,(n=[]).push("<li class='slide'>\n  <div class='list_content'>\n    <div class='list_text'>\n      <div class='date'>"),n.push("        "+t(e(this.start_date))),this.end_date!==this.start_date&&n.push("        "+t(e(" - "+this.end_date))),n.push("      </div>\n      <h3 class='list_title'>\n        <a href='"+e(this.item.link)+"' target='_blank'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>\n      </h3>\n      <a class='list_link' href='"+e(this.item.link)+"' target='_blank'>\u203a\u203a view details</a>\n    </div>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}).call(this),function(){null==window.JST&&(window.JST={}),window.JST.news=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,(n=[]).push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <a href='"+e(this.url)+"' target='"+e(this.target)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),n.push("          "+t(e(this.long_desc_rollover))),n.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img class='thumb' src='"+e(this.list_image_url)+"' alt='"+e(this.item.main_image_alt)+"'>\n      </div>\n      <div class='bottom_gradient'>\n        <div>\n          <h3>"),n.push("            "+t(e(this.item.title))),n.push("          </h3>\n        </div>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='list_date'>"),n.push("        "+t(e(this.publish_date))),n.push("      </div>\n      <div class='content_title'>\n        <a href='"+e(this.url)+"' target='"+e(this.target)+"'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>\n      </div>\n      <div class='article_teaser_body'>"),n.push("        "+t(e(this.long_desc))),n.push("      </div>\n    </div>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.publications=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,(n=[]).push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <div class='list_text'>"),this.url?(n.push("      <div class='publication_title'>\x92\n        <a href='"+e(this.url)+"' target='_blank'>"),n.push("        "+t(e(this.item.title))),n.push("        </a>\n      \x91</div>")):(n.push("      <div class='publication_title'>\x92"),n.push("        "+t(e(this.item.title))),n.push("      \x91</div>")),this.citation&&(n.push("      <div class='article_teaser_body'>\n        <div class='citation'>"),n.push("          "+e(this.citation)),n.push("        </div>\n      </div>")),n.push("    </div>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.resources=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,(n=[]).push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <a class='"+e(this.html_options["class"])+"' href='"+e(this.href)+"' data-fancybox-group='"+e(this.html_options["fancybox-group"])+"' data-fancybox-type='"+e(this.html_options["fancybox-type"])+"' data-fancybox-href='"+e(this.html_options["fancybox-href"])+"' data-title='"+e(this.html_options.title)+"' data-description='"+e(this.html_options.description)+"' data-credit='"+e(this.html_options.credit)+"' data-link='"+e(this.html_options.link)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),n.push("          "+e(this.short_desc)),n.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img src='"+e(this.list_image_src)+"' alt='"+e(this.item.alt_text)+"'>\n      </div>\n      <div class='bottom_gradient'>\n        <div>\n          <h3>"),n.push("            "+e(this.item.title)),n.push("          </h3>\n        </div>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='content_title'>\n        <a class='"+e(this.html_options["class"])+"' href='"+e(this.href)+"' data-fancybox-group='"+e(this.html_options["fancybox-group"])+"' data-fancybox-type='"+e(this.html_options["fancybox-type"])+"' data-fancybox-href='"+e(this.html_options["fancybox-href"])+"' data-title='"+e(this.html_options.title)+"' data-description='"+e(this.html_options.description)+"' data-credit='"+e(this.html_options.credit)+"' data-link='"+e(this.html_options.link)+"'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>\n      </div>\n      <div class='article_teaser_body'>"),n.push("        "+e(this.short_desc)),n.push("      </div>\n    </div>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){var l=[].slice;window.HAML=function(){function t(){}return t.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},t.cleanValue=function(e){switch(e){case null:case void 0:return"";case!0:case!1:return"\x93"+e;default:return e}},t.extend=function(e){var t,n,i,a,o,s,r;for(a=e,t=0,i=(s=2<=arguments.length?l.call(arguments,1):[]).length;t<i;t++)for(n in o=s[t])r=o[n],a[n]=r;return a},t.globals=function(){return{}},t.context=function(e){return this.extend({},t.globals(),e)},t.preserve=function(e){return e.replace(/\n/g,"&#x000A;")},t.findAndPreserve=function(e){var t;return t="textarea,pre".split(",").join("|"),e.replace(/\r/g,"").replace(RegExp("<("+t+")>([\\s\\S]*?)<\\/\\1>","g"),function(e,t,n){return"<"+t+">"+window.HAML.preserve(n)+"</"+t+">"})},t.surround=function(e,t,n){var i;return e+(null!=(i=n.call(this))?i.replace(/^\s+|\s+$/g,""):void 0)+t},t.succeed=function(e,t){var n;return(null!=(n=t.call(this))?n.replace(/\s+$/g,""):void 0)+e},t.precede=function(e,t){var n;return e+(null!=(n=t.call(this))?n.replace(/^\s+/g,""):void 0)},t.reference=function(e,t){var n,i,a;if(i=t?t+"_":"","function"==typeof e.hamlObjectRef?i+=e.hamlObjectRef():i+=((null!=(a=e.constructor)?a.name:void 0)||"object").replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase(),n="function"==typeof e.to_key?e.to_key():"function"==typeof e.id?e.id():e.id?e.id:e)return"class='"+i+"'"+" id='"+i+"_"+n+"'"},t}()}.call(this),function(){var s=[].slice;String.prototype.autoLink=function(){var t,i,a,e,n,o;return n=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(e=1<=arguments.length?s.call(arguments,0):[]).length?(a=e[0],i=function(){var e;for(t in e=[],a)o=a[t],"callback"!==t&&e.push(" "+t+"='"+o+"'");return e}().join(""),this.replace(n,function(e,t,n){return""+t+(("function"==typeof a.callback?a.callback(n):void 0)||"<a href='"+n+"'"+i+">"+n+"</a>")})):this.replace(n,"$1<a href='$2'>$2</a>")}}.call(this),function(){}.call(this);var mb_utils={init:function(){this._extendJquery(),this._extendJavascript(),this.initIOS7FocusBugFix()},_extendJquery:function(){jQuery.fn.exists=function(){return 0<this.length}},_extendJavascript:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},printThis:function(){var e=navigator.userAgent.toLowerCase();window.print?window.print():-1!=e.indexOf("mac")?alert("Press 'Cmd+p' on your keyboard to print article. "):alert("Press 'Ctrl+p' on your keyboard to print article. ")},initScrollToTop:function(e){$(e).click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},600)})},addSlideToggleListener:function(e,t,n,i){e.click(function(){n(),t.slideToggle(i)})},touchclick:function(e,t){$(e).on("touchstart click",function(e){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;t($(this),e),e.handled=!0})},initIOS7FocusBugFix:function(){Modernizr.touch&&($("input, select, textarea").focus(function(){$("body").addClass("fixfixed")}),$("input, select, textarea").blur(function(){$("body").removeClass("fixfixed")}))},distanceFromTop:function(e){return $(e).offset().top},distanceFromTopOfContainer:function(e){return $(e).position().top},getParam:function(e){var a={};return location.search.substr(1).split("&").forEach(function(e){var t=e.split("="),n=t[0],i=t[1]&&decodeURIComponent(t[1]);n in a?a[n].push(i):a[n]=[i]}),a[e]},toggleText:function(e,t,n){e.preventDefault();var i=$(t).parents(".description"),a=i.find(".long"),o=i.find(".short"),s=(n=n===undefined?{}:n).speed?n.speed:400;if(i.hasClass("condensed")){console.log("expand text");var r=o.height();o.hide(),a.css("min-height",r),a.slideDown(s)}else console.log("condense text"),a.slideUp(s,function(){o.show()});i.toggleClass("condensed")},initExpandableElement:function(){$(".expandable_element_link").click(function(){var e=$(this).attr("data-expand-index"),t=$('.expandable_element[data-expand-index="'+e+'"]'),n=$(this).attr("data-expand-text"),i=$(this).attr("data-contract-text");if(n&&i){var a=t.is(":visible")?n:i;$(this).text(a)}else{if(0<=$(this).text().indexOf("+ more")||0<=$(this).text().indexOf("- less")){a=t.is(":visible")?"+ more":"- less";$(this).text(a)}}t.slideToggle()})},writeToFancybox:function(e){$.fancybox({type:"html",content:e,openEffect:"none",closeEffect:"none",margin:0,padding:0})},simpleFormat:function(e,t){return e=e.replace(/\r\n?/,"\n"),0<(e=$.trim(e)).length&&(e=(e=e.replace(/\n\n+/g,"</p><p>")).replace(/\n/g,"<br />"),t&&(e="<p>"+e+"</p>")),e},getIEVersion:function(){var e=navigator.userAgent,t=/MSIE\s?(\d+)(?:\.(\d+))?/i,n=e.match(t);return null!=n?{major:n[1],minor:n[2]}:0<e.indexOf("Trident/")?{major:11,minor:0}:0<e.indexOf("Edge/")?{major:12,minor:0}:{major:"-1",minor:"-1"}},linkCitationsToFootnotes:function(){var i=$(".wysiwyg_content ol.footnotes li");if(i.exists()){var e=$(".wysiwyg_content sup").not(".math");$.each(e,function(){var e=parseInt($(this).text()),t=i.get(e-1),n=null;t&&(n=$(t)),e&&n&&($(this).wrap('<a class="citation" href="#footnote_'+e+'"></a>'),0==n.hasClass("footnote")&&(n.addClass("footnote"),n.wrapInner(function(){return"<div id='footnote_"+e+"'></div>"})))})}$("a.citation").click(function(e){console.log("citation click"),e.preventDefault();var t=$(this).attr("href");console.log("href: "+t);var n=t.replace("#",""),i=$("div[id="+n+"]");mb_utils.slideToElement(i,105)})},launch_sized_popup_window:function(e,t,n,i,a){var o="",s="0";i!=undefined&&(o="?layout="+i),a!=undefined&&(s=a);window.open(e+o,"_blank","toolbar=0, titlebar=0, menubar=0, scrollbars="+s+", resizable=yes, width="+t+", height="+n);self.name="main"},slideToElement:function(e,t,n){var i;console.log("slideToElement.offset: "+t),void 0===t&&(t=0),i="string"==typeof e?$(e):e,n?window.scrollTo(0,i.offset().top-t):$("html, body").animate({scrollTop:i.offset().top-t},800)},mouseCheck:function(){isMobile.any()||(console.log("mouseCheck"),0<$("html.touchevents").length&&("yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})))},mobileAndTabletCheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},mobileCheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},humanize:function(e){return e.toString().toLowerCase().replace(/[_-]/g," ").replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},debounce:function(a,o,s){var r;return function(){var e=this,t=arguments,n=function(){r=null,s||a.apply(e,t)},i=s&&!r;clearTimeout(r),r=setTimeout(n,o),i&&a.apply(e,t)}},humanFileSize:function(e,t){var n=t?1e3:1024;if(Math.abs(e)<n)return e+" B";for(var i=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;e/=n,++a,Math.abs(e)>=n&&a<i.length-1;);return e.toFixed(1)+" "+i[a]}},isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},iPad:function(){return navigator.userAgent.match(/iPad/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return screen.width<=500||isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},mb_nav={menuBtn:".menu_button",navContainer:"#global_nav_container",subnavContainer:".global_subnav_container",globalNav:"#global_nav",nav:"#nav",arrowBtn:"#global_nav .arrow_box",subnav:".subnav",login:".login :submit",login:".logout :submit",defaultNavTopPos:-1,navHeight:0,subnavHeight:0,subnavPaddingBottom:18,init:function(e){if(void 0!==e)for(var t in e)mb_nav[t]=e[t];this._addNavArrows(),this._setDefaultStyles(),this._initListeners()},isHideable:function(){return $(mb_nav.menuBtn).is(":visible")},_initListeners:function(){$(mb_nav.menuBtn).click(function(){mb_nav._toggleMobileNav()}),$(mb_nav.arrowBtn).mouseover(function(){$(this).parent().find(mb_nav.subnavContainer)}),$(mb_nav.arrowBtn).click(function(){var e=$(this).parent().find(mb_nav.subnavContainer);mb_nav._toggleMobileSubnav(e),$(this).toggleClass("reverse")}),$(window).bind("resize",function(){mb_nav._setStylesToMatchNav()}),$("html").hasClass("lt-ie9")||($(window).bind("load resize",function(){mb_nav.isHideable()||mb_nav._setStickyNavBreakpoint()}),$(window).bind("load resize scroll",function(){mb_nav.isHideable()||mb_nav._positionStickyNav()}))},_addNavArrows:function(){$(mb_nav.subnav).parents("li").addClass("more-arrow"),$(".more-arrow").prepend('<div class="arrow_box"><span class="arrow_down"></span></div>')},_setDefaultStyles:function(){mb_nav.isHideable()?mb_nav._setHideableNavStyles():mb_nav._setPersistentNavStyles()},_setHideableNavStyles:function(){$("body").removeClass("desktop_menu desktop_submenu_hidden").addClass("mobile_menu mobile_menu_hidden mobile_submenu_hidden")},_setPersistentNavStyles:function(){$("body").removeClass("mobile_menu mobile_menu_hidden mobile_submenu_hidden").addClass("desktop_menu desktop_submenu_hidden")},_setStylesToMatchNav:function(){mb_nav.isHideable()?!$("body").hasClass("desktop_menu")&&$("body").hasClass("mobile_menu")||mb_nav._setHideableNavStyles():$("body").hasClass("mobile_menu")&&!$("body").hasClass("desktop_menu")&&(mb_nav._setPersistentNavStyles(),$(mb_nav.subnavContainer).removeClass("expanded"))},_toggleMobileNav:function(){var e=$("body"),t=$(mb_nav.navContainer),n=$(mb_nav.subnavContainer),i=$(mb_nav.globalNav);mb_nav.navHeight=i.height(),!$("body").hasClass("mobile_menu_visible")?(t.css("height",mb_nav.navHeight),e.removeClass("mobile_menu_hidden").addClass("mobile_menu_visible")):(e.addClass("mobile_submenu_hidden"),t.css("height",0),n.css("height",0).removeClass("expanded"),$(mb_nav.arrowBtn).removeClass("reverse"),e.removeClass("mobile_menu_visible").addClass("mobile_menu_hidden"))},_toggleMobileSubnav:function(e){var t=!$(e).hasClass("expanded"),n=$(e).find(".subnav");mb_nav.subnavHeight=n.height()+mb_nav.subnavPaddingBottom,t?this._expandSubNav(e):this._contractSubNav(e)},_expandSubNav:function(e){$("body").removeClass("mobile_submenu_hidden"),$(e).addClass("expanded");var t=($(mb_nav.navContainer).height()+mb_nav.subnavHeight).toString()+"px";$(mb_nav.navContainer).css("height",t),$(e).css("height",mb_nav.subnavHeight)},_contractSubNav:function(e){$(e).removeClass("expanded");var t=($(mb_nav.navContainer).height()-mb_nav.subnavHeight).toString()+"px";$(mb_nav.navContainer).css("height",t),$(e).css("height",0)},_setStickyNavBreakpoint:function(){mb_nav.defaultNavTopPos=mb_utils.distanceFromTop(mb_nav.navContainer)},_positionStickyNav:function(){var e=$(window).scrollTop();mb_nav.defaultNavTopPos<e?$(mb_nav.navContainer).css({position:"fixed",top:0}).addClass("dropshadow"):($(mb_nav.navContainer).css("position","static").removeClass("dropshadow"),mb_nav._setStickyNavBreakpoint())},initFrontEndLoginState:function(){$(mb_nav.login).click(function(){return mb_nav._toggleLogin(),!1}),$(mb_nav.logout).click(function(){return mb_nav._toggleLogin(),!1})},_toggleLogin:function(){$("body").hasClass("mobile_menu");var e=!$("body").hasClass("mobile_menu_visible");$("body").hasClass("logged_in")?$("body").removeClass("logged_in").addClass("logged_out"):$("body").removeClass("logged_out").addClass("logged_in"),mb_nav.isHideable()&&!e&&this._toggleMobileNav()},initFrontEndNavHighlighting:function(){console.log("mb_nav.initFrontEndNavHighlighting");var e=$("#id > a"),t=document.location.href;for(i=0;i<e.length;i++){var n=e[i].href;0<=t.indexOf(n)&&e[i].addClass("current")}}},mb_meganav={init:function(){mb_meganav.initListeners()},initListeners:function(){$(".no-touchevents ul.nav > li").on("mouseenter",function(){$("#menu_button").is(":hidden")&&mb_meganav.openMegaNav(this)}),$(".touchevents ul.nav > li").on("click",function(e){if($("#menu_button").is(":hidden"))if(e.preventDefault(),e.stopPropagation(),$(e.originalEvent.currentTarget).hasClass("expanded")){console.log("meganav open, set up listeners"),(t=mb_meganav.getMeAnHref(e))&&(t.addClass("pressed"),window.location=t.attr("href"))}else{var t;if(0<$("ul.nav > li.expanded").length&&mb_meganav.closeMegaNav($("li.expanded")[0]),$(this).children(".global_subnav_container").length)mb_meganav.openMegaNav(this);else $(".page_cover").hide(),(t=mb_meganav.getMeAnHref(e))&&(t.addClass("pressed"),window.location=t.attr("href"));$(".page_cover").off().on("touchstart",function(){mb_meganav.closeMegaNav($("li.expanded")[0])})}}),$(".no-touchevents ul.nav > li").on("mouseleave",function(){$("#menu_button").is(":hidden")&&mb_meganav.closeMegaNav(this)})},getMeAnHref:function(e){var t;if($(e.target).attr("href"))t=$(e.target);else{var n=$(e.target).parents("a");0<n.length&&(t=n.eq(0))}return t},openMegaNav:function(e){var t=$(e),n=t.find(".meganav_container");0<n.length&&(t.addClass("expanded"),n.show(),$(".page_cover").show(),mb_meganav.setArrowAndNavPosition(t))},closeMegaNav:function(e){var t=$(e),n=t.find(".meganav_container");t.removeClass("expanded"),$(".page_cover").hide(),n.hide()},setArrowAndNavPosition:function(e){var t=e.offset().left+e.outerWidth()/2-16,n=$(".meganav_container").width()/2,i=t-n,a=t-$(".meganav_container.no_feature").width()/2,o=t-$(".meganav_container.wide").width()/2;if($(".nav_item_indicator").show(),$(".meganav_container").css({left:i+16}),$(".meganav_container.no_feature").css({left:a+16}),$(".meganav_container.wide").css({left:o+16}),e.find(".meganav").hasClass("columnar")){var s=$(".meganav.columnar li:first-child").position().top;$(".meganav.columnar li").each(function(e,t){$(t).position().top==s&&$(t).addClass("top")})}var r=$(window).width(),l=e.find(".meganav_container").width(),c=parseInt($(".meganav_container").css("left")),d=r-(c+l),u=c+l>$(window).width();console.log("meganav left: "+c),console.log("meganav right: "+d),console.log("meganav width  "+l),console.log("window width "+r),console.log("pastRightSide: "+u),d<10?($(".meganav_container").css({left:"auto",right:"10px"}),$(".nav_item_indicator").css({left:n-5-d})):$(".nav_item_indicator").css({left:"calc(50% - 15px)"})}};$.extend(mb_utils,{initResponsiveElement:function(e,t,n,i,a){void 0===i&&(i=mb_responsive_utils.getResponsiveBreakpoint()),$(window).bind("load resize",function(){mb_responsive_utils.moveResponsiveElements(e,t,n,i,a)})}});var mb_responsive_utils={_responsive_breakpoint:769,setResponsiveBreakpoint:function(e){this._responsive_breakpoint=e},getResponsiveBreakpoint:function(){return this._responsive_breakpoint},moveResponsiveElements:function(e,t,n,i,a){var o=$(window).width()<this._responsive_breakpoint?n:t;1==a&&$("html").hasClass("touch")?mb_responsive_utils._moveElementIfNecessary(e,n):mb_responsive_utils._moveElementIfNecessary(e,o)},_moveElementIfNecessary:function(e,t){$(t).attr("id")!=undefined&&$(e).parent().attr("id")!=undefined&&$(t).attr("id")!=$(e).parent().attr("id")&&(console.log("Moving Responsive Element: "+e+" from #"+$(e).parent().attr("id")+" to "+t),$(e).prependTo(t))}};$.extend(mb_utils,{createCookie:function(e,t,n,i){if(console.log("mb_utils.createCookie: "+e,t,n,i),n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="; expires="+a.toGMTString()}else o="";if(1==(void 0===i||i))var s="; secure";else s="";document.cookie=e+"="+t+o+s+"; path=/"},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return console.log("mb_utils.readCookie: "+e,a.substring(t.length,a.length)),a.substring(t.length,a.length)}return null},eraseCookie:function(e){mb_utils.createCookie(e,"",-1)}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,a,o,s,r,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)a=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(n=e.charCodeAt(c++))>>4,s=(15&n)<<2|(i=e.charCodeAt(c++))>>6,r=63&i,isNaN(n)?s=r=64:isNaN(i)&&(r=64),l=l+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(r);return l},decode:function(e){var t,n,i,a,o,s,r="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=Base64._keyStr.indexOf(e.charAt(l++))<<2|(a=Base64._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(o=Base64._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&o)<<6|(s=Base64._keyStr.indexOf(e.charAt(l++))),r+=String.fromCharCode(t),64!=o&&(r+=String.fromCharCode(n)),64!=s&&(r+=String.fromCharCode(i));return r=Base64._utf8_decode(r)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):191<i&&i<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}},mb_responsive_tables={init:function(){$(".wysiwyg_content table, .extra_wide_content").each(function(){var e=$(this),t=$("<div />",{"class":"table_wrapper",html:"<div />"}).insertBefore(e);e.data("scrollWrapper",t),e.appendTo(t.find("div")),e.outerWidth()>e.parent().outerWidth()&&e.data("scrollWrapper").addClass("has-scroll"),0<e.find("tr.expandable_element").length&&e.parents(".table_wrapper").parent().addClass("expandable_table_wrapper"),$(window).on("resize orientationchange",function(){e.outerWidth()>e.parent().outerWidth()?e.data("scrollWrapper").addClass("has-scroll"):e.data("scrollWrapper").removeClass("has-scroll")})})}};!function(o){var n="more_items",i=function(e,t){return this.$T=o(e),this.options=o.extend(!0,{page_number:0,url:"",button:o(".more_button .button"),entry_selector:e.children("li:last"),build_item_fn:i.prototype.buildItem,more_fn:"getMoreItemsAndAppend"},t),this._init(e,this.options),this};i.prototype._init=function(t,n){n.button.on("click",function(e){e.preventDefault(),o(t).more_items(n.more_fn)})},i.prototype.getMoreItemsAndAppend=function(e){return o(".loading").show(),this.options.button.hide(),this._getMore(e[0]),this.$T},i.prototype.exposeNextPage=function(){this.options.page_number+=1,this.$T.find(".page_"+this.options.page_number).show();var e=this.options.page_number+1;0==this.$T.find(".page_"+e).length&&this.options.button.hide()},i.prototype.emptyAndReload=function(e){this.$T.empty(),o(".loading").show(),this.options.button.hide(),this.options.zero_based?this.options.page_number=-1:this.options.page_number=0,this.options.params=e[0],this._getMore()},i.prototype._getMore=function(e){var i=this;i.options.get_items_on_load||(i.options.page_number+=1);var t={};this.options.page_key?t[this.options.page_key]=this.options.page_number:t.page=this.options.page_number;var n=o.extend(e,t,this.options.params),a=this.options.button;o.getJSON(this.options.url,n).done(function(e){var t="";i.options.before_fn&&i.options.before_fn();for(var n=0;n<e.items.length;n++)t+=i.options.build_item_fn(e.items[n]);""!=t?(i.options.get_items_on_load&&0==i.options.page_number?i.$T.append(t):i.options.entry_selector.after(t),i.options.entry_selector=i.$T.children("li:last")):i.options.get_items_on_load&&0==i.options.page_number&&i.$T.append("<p>There are no items matching this criteria.</p>"),e.error_message&&i.options.entry_selector.after("<hr><div class='error'>"+e.error_message+"</div>"),o(".loading").hide(),e.more&&1==e.more&&a.show(),i.options.get_items_on_load&&(i.options.page_number+=1),i.options.after_fn&&i.options.after_fn()}).fail(function(e,t,n){var i=t+", "+n;console.log("ajax request failed: "+i)})},i.prototype.buildItem=function(e){var t=e.target?e.target:"_blank",n='<li class="slide">';return n+='<a href="'+e.url.replace('"','"')+'" target="'+t+'">',n+='<div class="image_and_description_container">',n+='<div class="rollover_description">'+e.description,n+='<div class="overlay_arrow">',n+='<img alt="more arrow" src="/assets/overlay-arrow.png">',n+="</div>",n+="</div>",n+='<div class="img">',n+='<img alt="'+e.title.replace('"','"').replace(/(<([^>]+)>)/gi,"")+'" ',n+='class="thumb" src="'+e.thumb+'"></div>',n+='<div class="bottom_gradient">',n+="<div>",n+="<h3>"+e.title+"</h3>",n+="</div>",n+="</div>",n+="</div>",n+='<div class="list_text_content">',n+='<div class="content_title">',n+=e.title,n+="</div>",n+='<div class="article_teaser_body">',n+=e.description,n+="</div>",n+="</div>",n+="</a>",n+="</li>"},o.fn[n]=function(e){if(!o(this).length)return o(this);var t=o(this).data(n);return t&&0!=e.indexOf("_")&&t[e]&&"function"==typeof t[e]?t[e](Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void(
t?0==e.indexOf("_")?o.error("Method "+e+" is private!"):o.error("Method "+e+" does not exist."):o.error("Plugin must be initialised before using method: "+e)):(t=new i(o(this),e),o(this).data(n,t),o(this))}}(jQuery),mb_sharelines={initted:!1,fb_app_id:null,init:function(e){this.fb_app_id=e,this.initted||(console.log("sharelines initted."),this.getPartnerScripts(),this.initListeners(),this.initted=!0),this.addClassesToAttachedSharelines()},initListeners:function(){$(".selected").click(function(e){mb_sharelines.shareMessage(this,e)}),$(".selector").click(function(){console.log("selector clicked"),$(this).parents(".shareline").find(".share_options").toggle()}),$(".share_options *").click(function(e){mb_sharelines.shareMessage(this,e);var t=$(this).attr("class").replace("share_btn","");console.log("selected ",t),$(this).parents(".shareline").find(".selected").attr("class","selected "+t),$(this).parents(".shareline").find(".share_options").hide()})},addClassesToAttachedSharelines:function(){var e=".shareline",t="bottom_attached_sl",n="top_attached_sl",i=$(e).next(e),a=$(e).next("br").next(e),o=$(e).prev(e),s=$(e).prev("br").prev(e);i.addClass(t),a.addClass(t),o.addClass(n),s.addClass(n)},shareMessage:function(e,t){if($(e).hasClass("fi-social-twitter")){console.log("tweet!");var n=$(e).attr("href");$(e).parents(".shareline").find(".selected").attr("href",n)}else if($(e).hasClass("fi-social-facebook")){console.log("facebook!"),t.preventDefault(),$(e).parents(".shareline").find(".selected").attr("href","#");var i=$(e).parents(".shareline").find(".share_text").text();"undefined"!=typeof FB?FB.ui({method:"feed",link:window.location.href,description:i},function(){}):console.error("No Facebook app id, need this to share on FB")}else console.log("Selected clicked but unknown state",$(e).attr("class"))},getPartnerScripts:function(){this.fb_app_id&&this.initFacebook(),this.initTwitter()},initTwitter:function(){$.getScript("https://platform.twitter.com/widgets.js")},initFacebook:function(){$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:mb_sharelines.fb_app_id,version:"v2.4"})})}},mb_utils.mouseCheck=function(){isMobile.any()||(console.log("mouseCheck"),0<$("html.touchevents").length&&("yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})))};var nav={arrowBtn:"#site_nav_container .arrow_box",lastScrollTop:0,navTitle:".nav_item .nav_title",desktopStickyTopPos:0,opts:null,onscroll_classes:"nav_is_fixed",add_rem_selector:"body",nav_area:".nav_area",menu_open_div:".site_header_area",init:function(e,t){if(console.log("desktopStickyTopPos: "+e),e&&(this.desktopStickyTopPos=e),t&&t.style)switch(t.style){case"transparent":this.add_rem_selector=".site_header_area",this.onscroll_classes="fixed fixed_show";break;case"opaque_on_scroll":$(window).scroll(function(){var e=$(".site_header_area");0<$(window).scrollTop()?e.addClass("opaque"):e.removeClass("opaque")})}t&&t.onscroll_classes&&(this.onscroll_classes=t.onscroll_classes),t&&t.add_rem_selector&&(this.add_rem_selector=t.add_rem_selector),t&&(this.opts=t),this.initListeners(),nav.onScroll()},initListeners:function(){$("a#menu_button").click(function(e){e.preventDefault(),$(nav.nav_area).show(),$(nav.menu_open_div).addClass("menu_open"),$("a#menu_button").hide(),$("body").addClass("nav_overlay_true")}),$("a.modal_close").click(function(e){e.preventDefault(),$(nav.nav_area).hide(),$(nav.menu_open_div).removeClass("menu_open"),$("a#menu_button").show(),$("body").removeClass("nav_overlay_true")}),$("nav.site_nav a").click(function(){$(nav.nav_area).hide(),$(nav.menu_open_div).removeClass("menu_open"),$("a#menu_button").show(),$("body").removeClass("nav_overlay_true")}),$(nav.arrowBtn).click(function(){nav.toggleSubnav(this)}),$(nav.navTitle).click(function(){nav.toggleSubnav(this)}),$(window).scroll(nav.onScroll)},onScroll:function(){var e=$(window).scrollTop();nav.lastScrollTop;nav.lastScrollTop=e,$(window).scrollTop()>nav.desktopStickyTopPos?(nav.opts&&nav.opts.beforeScrollAdd&&nav.opts.beforeScrollAdd(),$(nav.add_rem_selector).addClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollAdd&&nav.opts.afterScrollAdd()):(nav.opts&&nav.opts.beforeScrollRemove&&nav.opts.beforeScrollRemove(),$(nav.add_rem_selector).removeClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollRemove&&nav.opts.afterScrollRemove())},toggleSubnav:function(e){if("inline-block"!=$(".subnav li").css("display")){var t=$(e).parent().find(".global_subnav_container"),n=$(e).parent().find(".arrow_box");$(t).slideToggle(300),$(n).toggleClass("reverse")}}},nav_search={nav_search_open:!1,nav_search_orig_size:null,init:function(){$(".nav_search .search_field").keydown(function(e){13==(e.keyCode||e.which)&&$(".nav_search .search_field").val()&&(0<$(".site_header_area.menu_open").length||nav_search.nav_search_open)&&nav_search.submitSearch()}),$(".nav_search .search_submit").click(function(e){e.preventDefault(),null==nav_search.nav_search_orig_size&&(nav_search.nav_search_orig_size=$(".nav_search .search_field").css("width")),0<$(".site_header_area.menu_open").length?$(".nav_search .search_field").val()&&nav_search.submitSearch():$(".nav_search .search_field").css("width")==nav_search.nav_search_orig_size?($(".nav_search .search_field").css("width","100%").addClass("search_open"),$(".nav_search .search_field").focus(),nav_search.nav_search_open=!0):$(".nav_search .search_field").val()?nav_search.submitSearch():($(".nav_search .search_field").css("width",nav_search.nav_search_orig_size).removeClass("search_open"),nav_search.nav_search_open=!1)})},submitSearch:function(){var e=$(".nav_search .search_field").val();$(".nav_search .search_field").val("").css("width",nav_search.nav_search_orig_size).removeClass("search_open").blur(),nav_search.nav_search_open=!1,window.open("https://mars.nasa.gov/search/?q="+e+"&x=0&y=0","_blank")}};$(document).ready(function(){nav_search.init()});var grid_list_page={filterPos:"",init:function(){this.initGridListButtons(),this.initFilterBar()},initGridListButtons:function(){$(".nav_item.list_icon").click(function(){$(this).parents("section").removeClass("grid_view"),$(this).parents("section").addClass("list_view")}),$(".nav_item.grid_icon").click(function(){$(this).parents("section").removeClass("list_view"),$(this).parents("section").addClass("grid_view")})},initFilterBar:function(){$(".filter_bar").exists()&&(mb_utils.touchclick(".filter_bar header",function(){$(".filter_bar .arrow_box").is(":visible")&&($(".filter_bar .arrow_box").toggleClass("rotate_up"),$(".section_search").toggle())}),$(".filter_bar .filter").change(function(){this.form.submit()}))}},scical={key:"AIzaSyB-YdQWxXQtmjxqqnzWdfaXBox7yM7vonE",url:"https://www.googleapis.com/calendar/v3/calendars/eni.g.njoku@jpl.nasa.gov/events?maxResults=3&singleEvents=True&futureEvents=True&orderBy=startTime",footer_sel:"#footer_science_calendar",monthabbrs:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],init:function(){var e=scical.url+"&timeMin="+scical.curDate()+"&key="+this.key;$.get(e,scical.insertScienceCalendar)},insertScienceCalendar:function(e){$.each(e.items,function(e,t){var n=t.start.date==undefined?t.start.dateTime.substring(0,10):t.start.date,i=t.end.date==undefined?t.end.dateTime.substring(0,10):t.end.date,a="<div class='col"+(e+1)+"'><div class='event_date'>"+(n==i?scical.dateToStr(new Date(n)):scical.dateToStr(new Date(n))+" - "+scical.dateToStr(new Date(i)))+"</div><div class='event_title'>"+t.summary+"</div>";$(scical.footer_sel).append(a)})},dateToStr:function(e){return scical.monthabbrs[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},curDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),today_formatted=i+"-"+n+"-"+t+"T00:00:00-04:00",today_formatted}};mb_parallax={init:function(){var i=0<$(".explore_overlay_page").length,e=0<$("section.feature_pages").length;if(mb_utils.mobileAndTabletCheck()||i||!e)$(".parallax_module .featured_image").each(function(e,t){i?$(t).siblings(".window").remove():$(t).siblings(".window").addClass("mobile");var n=$(t).data("image");$(t).append('<img src="'+n+'"></img>')});else{var t=mb_utils.getIEVersion(),n=1<t.major&&t.major<=9;$(".parallax_module .featured_image").each(function(e,t){$(t).imageScroll({container:$(t).closest(".parallax_module"),holderMinHeight:800,parallax:!n})})}}},$(document).ready(function(){mb_parallax.init()});var TAI_UTC=37,main={spinner_opts:{lines:8,length:1,width:3,radius:12,color:"#fcb963",speed:2,trail:50,shadow:!1,className:"spinner"},mousePos:{x:-1,y:-1},scroll_to:null,changePage:function(e,t){"Website"==t&&window.open(e,"_blank"),window.location=e},init:function(){mb_utils.init(),main.initListeners(),$("body").is("#home")?nav.init($(".site_header_area").height()):nav.init($(".site_header_area").height()-$(".nav_area").height()),0==$('[data-react-class="GridListPage"]').length&&0==$('[data-react-class="GridList"]').length&&grid_list_page.init();$("nav.secondary_nav").length;0<$(".main_feature").length&&$("body").addClass("main_feature_present"),mb_responsive_tables.init(),this._checkAndSetFormElementsBasedOnQueryParams(),mb_utils.linkCitationsToFootnotes(),mb_utils.initExpandableElement(),mb_utils.mouseCheck(),this.equalHeights(),$("section.more_bar").click(function(e){main.scrollDown(e)})},initListeners:function(){if(automat.init(),isMobile.any()){$("#vital_signs_modal").css("height",window.innerHeight-36+"px");var e=$("#featured_image").attr("data-mobile-image"),t=$("#featured_image").attr("data-image");$("#featured_image").siblings(".window").addClass("mobile");var n='<picture><source srcset="'+t+'"media="(min-width: 600px)"><source srcset="'+e+'"/><img src="'+e+'"></picture>';$("#featured_image").append(n)}else{var i=1<mb_utils.getIEVersion().major;$("#featured_image").imageScroll({container:$(".image_of_the_day"),holderMinHeight:400,holderMaxHeight:680,parallax:!i})}var a,o;mb_utils.mobileAndTabletCheck()||$(".fancybox").fancybox({maxWidth:$(window).width()-165,maxHeight:$(window).height(),fitToView:!1,width:"100%",height:"100%",autoSize:!1,openEffect:"none",closeEffect:"none",margin:0,padding:0}),isMobile.any()?o=!(a=[20,20,20,20]):(a=[30,55,30,55],o=!0),$("a.fancybox_video").fancybox({fitToView:!1,autoscale:!1,margin:a,autoSize:!1,closeClick:!1,closeBtn:!1,openEffect:"none",closeEffect:"none",nextEffect:"fade",prevEffect:"fade",mouseWheel:!1,theme:"mb-video",arrows:o,beforeShow:function(){video&&$(video.video_div).exists()&&jwplayer(video.video_div).pause(!0)}});var s={padding:10,maxWidth:$(window).width()-64,openEffect:"fade",closeEffect:"fade",mouseWheel:!1,theme:"dark",helpers:{thumbs:{source:function(e){return $(e.element).attr("data-thumbnail")}}},beforeLoad:function(){var e=$(this.element).attr("data-title");window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e+='<div class="wrapper_spacer">',e+="  <div class='addthis_toolbox addthis_default_style'    addthis:url='"+window.location.origin+$(this.element).attr("data-link")+"'   addthis:title='"+$(this.element).attr("data-title")+"'   addthis:description='"+$(this.element).attr("data-sharedescription")+"'  >",e+='     <div class="buttons">',e+='       <a class="addthis_button_compact">',e+='         <img src="/assets/share.png">',e+="       </a>";var t=$(this.element).attr("data-external-id");if(t){var n=mb_utils.readCookie("raw_images_selection"),i=((n?n.split(","):[]).indexOf(t),$(this.element).attr("data-link").match(/\/(.+)$/)[1]);e+='       <a class="button" href="'+$(this.element).attr("data-fancybox-href")+' " target="_top" download="'+i+'">',e+="DOWNLOAD",e+="       </a>",e+='       <a class="button" href="'+$(this.element).attr("data-link")+'" target="_top">',e+="more info",e+="       </a>"}else e+='       <a class="button" href="'+$(this.element).attr("data-link")+' " target="_top">',e+="more info",e+="       </a>";e+="     </div>",e+="   </div>",e+="</div>",this.title=e},afterShow:function(){var e=$(this.element).attr("data-external-id"),n=$(this.element).attr("data-id");e&&n?(console.log("raw images fancybox afterShow"),$(".fancybox-inner .fancybox-image").css("cursor","pointer").click(function(){$.fancybox.next()}),ga("create","UA-10170298-1","auto"),ga(function(e){var t=e.get("clientId");$.ajax({url:"/raw/view/"+n+"?cid="+t,type:"GET",dataType:"jsonp"})})):$(".fancybox-inner .fancybox-image").wrap('<a href="'+$(this.element).attr("data-link")+'"></a>'),"undefined"!=typeof addthis&&addthis.toolbox($(".addthis_toolbox").get())},afterClose:function(){$(this.element).attr("data-id")&&$(window).trigger("setCurrentDetailFromFancybox",[$(this.element).attr("data-id")])}};$(".fancybox_slideshow").fancybox(s),$(".fancybox_slideshow_launch").click(function(e){e.preventDefault(),$(this).parents(".image_and_description_container").find("a.fancybox_slideshow").click()}),$(".fancybox_info").fancybox({openEffect:"none",closeEffect:"none",closeBtn:!1,mouseWheel:!1,maxWidth:$(window).width()-165,maxHeight:$(window).height(),fitToView:!1,width:"100%",height:"100%",autoSize:!1,theme:"mb-info",beforeLoad:function(){this.title=main.constructFancyBoxInfo(this.element,!0)},afterShow:function(){$(".close_button").click(function(){parent.$.fancybox.close(),"undefined"!=typeof _atw&&_atw.clb()}),"undefined"!=typeof addthis&&addthis.toolbox($(".addthis_toolbox").get()),$(".addthis_button_compact img").on("mouseover",function(){return!1})},padding:0})},resizeFancybox:function(e){if(console.log(e),$(".fancybox-wrap").exists()){var t=50;$(".fancybox-wrap,.fancybox-inner").height(e+t)}},constructFancyBoxInfo:function(e){console.log("constructFancyBoxInfo");var t="";return t+='<div id="fancybox_info">',t+=' <div class="image_details">',t+='\t <div class="buttons clearfix">',t+='   <div class="close_button"></div>',t+='\t   <div class="inner_buttons">',t+='\t    <div class="addthis_toolbox addthis_default_style"addthis:url="'+$(e).attr("data-link")+'"addthis:title="'+$(e).attr("data-title")+'"addthis:description="'+$(e).attr("data-description").replace('"',"&quot;").replace(/(<([^>]+)>)/gi,"")+'">',t+='\t\t   <a class="addthis_button_compact">',t+='\t\t    <img src="/assets/share.png">',t+="\t\t   </a>",t+='\t    <div class="atclear"></div>',t+="    </div>",t+='\t   <a class="button" href="'+$(e).attr("data-link")+' " target="_top">',t+="more info",t+="\t   </a>",t+="\t  </div>",t+="\t </div>",t+='\t <div class="text">',t+='\t  <h2 class="title">',t+=$(e).attr("data-title"),t+="\t  </h2>",t+='\t  <div class="description">',t+=$(e).attr("data-description"),t+="\t  </div>",$(e).attr("data-credit")!=undefined&&(t+='\t  <div class="image_caption">',t+=$(e).attr("data-credit"),t+="\t  </div>"),t+="  </div>",t+=" </div>",t+="</div>"},checkSubscribeForm:function(){var e=$("#newsletter_subscribe_email").val(),t=e.indexOf("@"),n=e.lastIndexOf(".");if(t<1||n<t+2||n+2>=e.length)return alert("Not a valid e-mail address"),!1;$.post("/newsletter_subscribe_submit",{email:e})},_checkAndSetFormElementsBasedOnQueryParams:function(){if("undefined"!=typeof form_params)for(var e=0;e<form_params.length;e++){var t=mb_utils.getParam(form_params[e].param);t&&(console.log("setting "+form_params[e].selector+" to "+t),$(form_params[e].selector).val(t))}},scrollDown:function(e){e.preventDefault();var t=$(e.currentTarget).offset().top-($("header.site_header").innerHeight()-$("section.more_bar").innerHeight());$("html,body").animate({scrollTop:t},600)},equalHeights:function(){viewportSize.getWidth();$(window).bind("load resize",function(){viewportSize.getWidth()<769?(viewportSize.getWidth(),$(".applications_large_button").unequalHeights(),viewportSize.getWidth()<600?$(".applications_large_button").unequalHeights():$(".applications_large_button").equalHeights()):($(".applications_large_button").unequalHeights(),$(".applications_large_button").equalHeights())})},scrollToEl:function(e){var t=$(".site_header_area").height();main.scroll_to=$(e).offset().top-t,$("html, body").animate({scrollTop:$(e).offset().top-t},600),window.onbeforeunload=main.beforeUnload},beforeUnload:function(){main.scroll_to&&window.scrollTo(0,main.scroll_to)},initSammy:function(){if("Page not found (404)"!=$("title").text()){var e=Sammy("#home",function(){this.disable_push_state=!0,this.get("/",function(){main.scroll_to=0,$("html, body").animate({scrollTop:0},600)}),this.get("#red_planet",function(){var e=0;main.scrollToEl("#red_planet_section"),$(pct.pct_selector).find("li.section[data-idx="+e+"]").click()}),this.get("#red_planet/:id",function(){var e=this.params.id;0<$(pct.pct_selector).find(".mobile_catcont_nav:visible").length?$(pct.pct_selector).find(".mobile_catcont_nav").eq(e).click():(main.scrollToEl(pct.pct_selector),$(pct.pct_selector).find("li.section[data-idx="+e+"]").click())}),this.get("#mars_exploration_program",function(){main.scrollToEl("#info_tabs")}),this.get("#mars_exploration_program/:id",function(){var e=this.params.id;$("#info_tabs_nav").find(".info_tabs_link[data-idx="+e+"]").click(),main.scrollToEl("#info_tabs")}),this.get("#news_and_events",function(){main.scrollToEl("#news_and_events_section")}),this.get("#multimedia",function(){main.scrollToEl(".image_of_the_day")}),this.get("#more",function(){main.scrollToEl("#more_section")}),this.get("#missions",function(){main.scrollToEl(".missions_teaser")})});window.setTimeout(function(){e.run()},1)}},setSols:function(){var i=utcToMsd(new Date),e=[{sol_0:49268,spacecraft:"curiosity",deg_east:137.4},{sol_0:46235,spacecraft:"opportunity",deg_east:344.72484}];$.each(e,function(e,t){var n=Math.floor(i-(360-t.deg_east)/360-t.sol_0);$("#dashboard_"+t.spacecraft).find(".subtitle").text(n+" SOLS ON MARS")})},setInsightLaunch:function(){var e=$("#insight_arrival_date").val();if(e){var t,n=moment(e),i=moment(new Date),a=moment.duration(i.diff(n)),o=Math.round(a.asDays()),s=Math.round(a.asHours()),r=Math.round(a.asMinutes());t=s<-23?(o=Math.abs(o))+" "+(1==o?"day":"days")+" to landing":-23<=s&&s<0?(s=Math.abs(s))+" "+(1==s?"hour":"hours")+" to landing":r<0?(r=Math.abs(r))+" "+(1==r?"minute":"minutes")+" to landing":"",$("#dashboard_insight").find(".subtitle").text(t)}}};$(function(){main.init()}),footer={init:function(){this._initIsotopeFooter()},_initIsotopeFooter:function(){$("#sitemap_directory, #sitemap_directory_404").isotope({itemSelector:".sitemap_block",layoutMode:"masonry"})}},$(document).ready(function(){footer.init()}),addthis_loader={initted:!1,floater:!1,follow:!1,script_src:null,pubid:"",is_admin:null,share_url:null,layer_opts:{theme:"transparent",share:{position:"left",services:"twitter,facebook,email,more",offset:{top:"60%"}},responsive:{maxWidth:"479px"}},init:function(e,t){this.is_admin=0<=window.location.href.search("mbcms"),t.floater&&(this.floater=t.floater),t.follow&&(this.follow=t.follow),t.addthis_url&&(addthis_loader.share_url=t.addthis_url);var n=/#pubid=([a-z\d-]*)/.exec(e);n&&(this.pubid=n[1]),this.script_src=e,addthis_loader.initted=!0},scriptLoaded:function(){"undefined"!=typeof addthis?(console.log("addthis script loaded"),addthis_loader.floater&&(addthis.layers(addthis_loader.layer_opts),addthis_loader.initListeners()),addthis_loader.share_url&&addthis.update("share","url",addthis_loader.share_url),addthis):window.setTimeout(function(){addthis_loader.scriptLoaded()},500)},initListeners:function(){addthis.addEventListener("addthis.ready",addthis_loader.addthisReady)},addthisReady:function(){var t=.5*$(window).height();$(window).scroll(function(){var e=$(window).scrollTop();t<e&&!$(".addthis-smartlayers").hasClass("done")&&(console.log("show addthis float"),$(".addthis-smartlayers").css({opacity:0,visibility:"visible"}).animate({opacity:1}),$(".addthis-smartlayers").addClass("done"))})}},$(document).ready(function(){addthis_loader.initted&&!addthis_loader.is_admin&&(addthis_config={data_track_addressbar:!1,pubid:addthis_loader.pubid},$.getScript(addthis_loader.script_src,addthis_loader.scriptLoaded))});var automat={init:function(){$("html").hasClass("touchevents")&&$(".automat_module .desktop_automat_items").find(".compartment").click(function(e){e.preventDefault();var t=$(this),n=t.hasClass("current"),i=$(this).parents(".desktop_automat_items").find(".compartment.current");n?window.location=$(this).find("a")[0].href:(t.addClass("current"),$(this).find(".additional_info").slideDown(300),i.find(".additional_info").slideUp(300),i.removeClass("current"))}),$(".automat_module .mobile_automat_items").find(".automat_item").click(function(){var e=$(this),t=e.hasClass("current"),n=$(this).parents(".mobile_automat_items").find(".automat_item.current");n.find(".additional_info").slideUp(300),n.removeClass("current"),t||(e.addClass("current"),$(this).find(".additional_info").slideDown(300))})}};